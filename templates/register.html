<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ÄÄƒng KÃ½ - Dog Breed Recognition</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/base.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/pages/auth.css') }}"
    />
  </head>
  <body class="auth-body">
    <div class="auth-container">
      <!-- Left Side - Brand & Visual -->
      <div class="auth-left">
        <div class="auth-brand">
          <div class="brand-icon">ğŸ•</div>
          <h1 class="brand-title">Dog Breed Recognition</h1>
          <p class="brand-subtitle">Nháº­n diá»‡n giá»‘ng chÃ³ thÃ´ng minh vá»›i AI</p>
        </div>
        <div class="auth-features">
          <div class="feature-item">
            <div class="feature-icon">ğŸ¯</div>
            <div class="feature-text">
              <h3>Miá»…n phÃ­ sá»­ dá»¥ng</h3>
              <p>KhÃ´ng giá»›i háº¡n sá»‘ láº§n nháº­n diá»‡n</p>
            </div>
          </div>
          <div class="feature-item">
            <div class="feature-icon">ğŸ”’</div>
            <div class="feature-text">
              <h3>Báº£o máº­t tuyá»‡t Ä‘á»‘i</h3>
              <p>Dá»¯ liá»‡u Ä‘Æ°á»£c mÃ£ hÃ³a vÃ  báº£o vá»‡</p>
            </div>
          </div>
          <div class="feature-item">
            <div class="feature-icon">ğŸ’¾</div>
            <div class="feature-text">
              <h3>LÆ°u trá»¯ lá»‹ch sá»­</h3>
              <p>Truy cáº­p má»i lÃºc má»i nÆ¡i</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Side - Register Form -->
      <div class="auth-right">
        <div class="auth-form-container">
          <div class="auth-header">
            <h2>Táº¡o tÃ i khoáº£n má»›i</h2>
            <p>Báº¯t Ä‘áº§u hÃ nh trÃ¬nh nháº­n diá»‡n giá»‘ng chÃ³ cá»§a báº¡n</p>
          </div>

          <!-- Flash Messages -->
          {% with messages = get_flashed_messages(with_categories=true) %} {% if
          messages %} {% for category, message in messages %}
          <div class="alert alert-{{ category }}">
            <span class="alert-icon"
              >{% if category == 'success' %}âœ“{% elif category == 'error' %}âœ•{%
              else %}â„¹{% endif %}</span
            >
            <span class="alert-message">{{ message }}</span>
          </div>
          {% endfor %} {% endif %} {% endwith %}

          <form method="post" class="auth-form" id="registerForm">
            <div class="form-row">
              <div class="form-group">
                <label for="fullname" class="form-label">
                  <span class="label-icon">ğŸ‘¤</span>
                  Há» vÃ  tÃªn
                </label>
                <input
                  type="text"
                  id="fullname"
                  name="fullname"
                  class="form-input"
                  placeholder="Nguyá»…n VÄƒn A"
                  required
                  autocomplete="name"
                />
                <span class="form-error" id="fullnameError"></span>
              </div>

              <div class="form-group">
                <label for="email" class="form-label">
                  <span class="label-icon">ğŸ“§</span>
                  Email
                </label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  class="form-input"
                  placeholder="example@email.com"
                  required
                  autocomplete="email"
                />
                <span class="form-error" id="emailError"></span>
              </div>
            </div>

            <div class="form-group">
              <label for="username" class="form-label">
                <span class="label-icon">ğŸ·ï¸</span>
                TÃªn Ä‘Äƒng nháº­p
              </label>
              <input
                type="text"
                id="username"
                name="username"
                class="form-input"
                placeholder="Chá»n tÃªn Ä‘Äƒng nháº­p duy nháº¥t"
                required
                autocomplete="username"
              />
              <span class="form-hint"
                >Ãt nháº¥t 3 kÃ½ tá»±, chá»‰ chá»©a chá»¯ cÃ¡i, sá»‘ vÃ  dáº¥u gáº¡ch dÆ°á»›i</span
              >
              <span class="form-error" id="usernameError"></span>
            </div>

            <div class="form-group">
              <label for="password" class="form-label">
                <span class="label-icon">ğŸ”’</span>
                Máº­t kháº©u
              </label>
              <div class="password-input-wrapper">
                <input
                  type="password"
                  id="password"
                  name="password"
                  class="form-input"
                  placeholder="Táº¡o máº­t kháº©u máº¡nh"
                  required
                  autocomplete="new-password"
                />
                <button
                  type="button"
                  class="password-toggle"
                  id="togglePassword"
                >
                  <span class="eye-icon" id="eyeIcon">ğŸ‘ï¸</span>
                </button>
              </div>
              <div class="password-strength" id="passwordStrength">
                <div class="strength-bar">
                  <div class="strength-fill" id="strengthFill"></div>
                </div>
                <span class="strength-text" id="strengthText"
                  >Äá»™ máº¡nh máº­t kháº©u</span
                >
              </div>
              <span class="form-error" id="passwordError"></span>
            </div>

            <div class="form-group">
              <label for="confirmPassword" class="form-label">
                <span class="label-icon">ğŸ”</span>
                XÃ¡c nháº­n máº­t kháº©u
              </label>
              <div class="password-input-wrapper">
                <input
                  type="password"
                  id="confirmPassword"
                  name="confirmPassword"
                  class="form-input"
                  placeholder="Nháº­p láº¡i máº­t kháº©u"
                  required
                  autocomplete="new-password"
                />
                <button
                  type="button"
                  class="password-toggle"
                  id="toggleConfirmPassword"
                >
                  <span class="eye-icon" id="eyeIconConfirm">ğŸ‘ï¸</span>
                </button>
              </div>
              <span class="form-error" id="confirmPasswordError"></span>
            </div>

            <div class="form-group">
              <label class="checkbox-label">
                <input
                  type="checkbox"
                  id="terms"
                  class="checkbox-input"
                  required
                />
                <span class="checkbox-custom"></span>
                <span class="checkbox-text">
                  TÃ´i Ä‘á»“ng Ã½ vá»›i
                  <a href="#" class="link-inline">Äiá»u khoáº£n dá»‹ch vá»¥</a> vÃ 
                  <a href="#" class="link-inline">ChÃ­nh sÃ¡ch báº£o máº­t</a>
                </span>
              </label>
            </div>

            <button type="submit" class="btn-submit">
              <span class="btn-text">Táº¡o tÃ i khoáº£n</span>
              <span class="btn-icon">â†’</span>
            </button>
          </form>

          <div class="auth-footer">
            <p class="footer-text">
              ÄÃ£ cÃ³ tÃ i khoáº£n?
              <a href="{{ url_for('login.login') }}" class="footer-link"
                >ÄÄƒng nháº­p ngay</a
              >
            </p>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Password toggle for password
      const togglePassword = document.getElementById("togglePassword");
      const passwordInput = document.getElementById("password");
      const eyeIcon = document.getElementById("eyeIcon");

      togglePassword.addEventListener("click", function () {
        const type = passwordInput.type === "password" ? "text" : "password";
        passwordInput.type = type;
        eyeIcon.textContent = type === "password" ? "ğŸ‘ï¸" : "ğŸ™ˆ";
      });

      // Password toggle for confirm password
      const toggleConfirmPassword = document.getElementById(
        "toggleConfirmPassword",
      );
      const confirmPasswordInput = document.getElementById("confirmPassword");
      const eyeIconConfirm = document.getElementById("eyeIconConfirm");

      toggleConfirmPassword.addEventListener("click", function () {
        const type =
          confirmPasswordInput.type === "password" ? "text" : "password";
        confirmPasswordInput.type = type;
        eyeIconConfirm.textContent = type === "password" ? "ğŸ‘ï¸" : "ğŸ™ˆ";
      });

      // Password strength meter
      const strengthFill = document.getElementById("strengthFill");
      const strengthText = document.getElementById("strengthText");

      passwordInput.addEventListener("input", function () {
        const password = this.value;
        let strength = 0;
        let text = "";
        let color = "";

        if (password.length >= 6) strength++;
        if (password.length >= 10) strength++;
        if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength++;
        if (/\d/.test(password)) strength++;
        if (/[^a-zA-Z0-9]/.test(password)) strength++;

        switch (strength) {
          case 0:
          case 1:
            text = "Ráº¥t yáº¿u";
            color = "#dc3545";
            break;
          case 2:
            text = "Yáº¿u";
            color = "#fd7e14";
            break;
          case 3:
            text = "Trung bÃ¬nh";
            color = "#ffc107";
            break;
          case 4:
            text = "Máº¡nh";
            color = "#28a745";
            break;
          case 5:
            text = "Ráº¥t máº¡nh";
            color = "#20c997";
            break;
        }

        strengthFill.style.width = strength * 20 + "%";
        strengthFill.style.backgroundColor = color;
        strengthText.textContent = text;
        strengthText.style.color = color;
      });

      // Form validation
      const registerForm = document.getElementById("registerForm");
      const fullnameInput = document.getElementById("fullname");
      const emailInput = document.getElementById("email");
      const usernameInput = document.getElementById("username");

      const fullnameError = document.getElementById("fullnameError");
      const emailError = document.getElementById("emailError");
      const usernameError = document.getElementById("usernameError");
      const passwordError = document.getElementById("passwordError");
      const confirmPasswordError = document.getElementById(
        "confirmPasswordError",
      );

      registerForm.addEventListener("submit", function (e) {
        let isValid = true;

        // Clear previous errors
        [
          fullnameError,
          emailError,
          usernameError,
          passwordError,
          confirmPasswordError,
        ].forEach((el) => (el.textContent = ""));
        [
          fullnameInput,
          emailInput,
          usernameInput,
          passwordInput,
          confirmPasswordInput,
        ].forEach((el) => el.classList.remove("input-error"));

        // Validate fullname
        if (fullnameInput.value.trim().length < 2) {
          fullnameError.textContent = "Há» tÃªn pháº£i cÃ³ Ã­t nháº¥t 2 kÃ½ tá»±";
          fullnameInput.classList.add("input-error");
          isValid = false;
        }

        // Validate email
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(emailInput.value)) {
          emailError.textContent = "Email khÃ´ng há»£p lá»‡";
          emailInput.classList.add("input-error");
          isValid = false;
        }

        // Validate username
        const usernameRegex = /^[a-zA-Z0-9_]{3,20}$/;
        if (!usernameRegex.test(usernameInput.value)) {
          usernameError.textContent =
            "TÃªn Ä‘Äƒng nháº­p pháº£i cÃ³ 3-20 kÃ½ tá»±, chá»‰ chá»©a chá»¯ cÃ¡i, sá»‘ vÃ  dáº¥u gáº¡ch dÆ°á»›i";
          usernameInput.classList.add("input-error");
          isValid = false;
        }

        // Validate password
        if (passwordInput.value.length < 6) {
          passwordError.textContent = "Máº­t kháº©u pháº£i cÃ³ Ã­t nháº¥t 6 kÃ½ tá»±";
          passwordInput.classList.add("input-error");
          isValid = false;
        }

        // Validate confirm password
        if (confirmPasswordInput.value !== passwordInput.value) {
          confirmPasswordError.textContent = "Máº­t kháº©u xÃ¡c nháº­n khÃ´ng khá»›p";
          confirmPasswordInput.classList.add("input-error");
          isValid = false;
        }

        if (!isValid) {
          e.preventDefault();
        }
      });

      // Input focus effects
      document.querySelectorAll(".form-input").forEach((input) => {
        input.addEventListener("focus", function () {
          const wrapper =
            this.closest(".password-input-wrapper") || this.parentElement;
          wrapper.classList.add("input-focused");
        });
        input.addEventListener("blur", function () {
          const wrapper =
            this.closest(".password-input-wrapper") || this.parentElement;
          wrapper.classList.remove("input-focused");
        });
      });
    </script>
  </body>
</html>
