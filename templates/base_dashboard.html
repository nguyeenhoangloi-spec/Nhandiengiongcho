<!doctype html>
<html lang="vi" data-theme="{{ ui_theme }}">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="color-scheme" content="light dark" />

    <script>
      // Apply theme s·ªõm ƒë·ªÉ tr√°nh flash
      (function () {
        try {
          var t = localStorage.getItem("theme");
          if (t) document.documentElement.setAttribute("data-theme", t);
        } catch (e) {}
      })();
    </script>

    <title>{% block title %}DogBreed.AI{% endblock %}</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/base.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/pages/dashboard.css') }}"
    />
    {% block extra_css %}{% endblock %}
    <!-- Font Awesome CDN for sidebar icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body class="dashboard-layout">
    <nav class="top-navbar">
      <div class="navbar-left">
        <span class="navbar-logo">üêï</span>
        <span class="navbar-title">DogBreed.AI</span>
      </div>

      <div class="navbar-center"></div>

      <div class="navbar-right">
        <div class="navbar-main-links">
          <a href="{{ url_for('dashboard.dashboard') }}" class="nav-item"
            ><i class="fa-solid fa-house"></i> Trang ch·ªß</a
          >
          <a href="{{ url_for('predict.upload_page') }}" class="nav-item"
            ><i class="fa-solid fa-paw"></i> Nh·∫≠n di·ªán</a
          >
          <a href="{{ url_for('history.history') }}" class="nav-item"
            ><i class="fa-solid fa-clock-rotate-left"></i> L·ªãch s·ª≠</a
          >
          <a href="{{ url_for('statistics.statistics') }}" class="nav-item"
            ><i class="fa-solid fa-chart-bar"></i> Th·ªëng k√™</a
          >
        </div>
        {% if session.get('user_id') %}
        <div class="user-dropdown-group">
          <div class="user-dropdown">
            <button class="user-dropdown-toggle">
              <i class="fa-solid fa-user-circle"></i> {{ session.get('username')
              }} {% if current_plan %}
              <span class="user-plan"
                ><i class="fa-solid fa-crown"></i> {{ current_plan|upper
                }}</span
              >
              {% endif %}
              <i class="fa fa-caret-down"></i>
            </button>
            <div class="user-dropdown-menu">
              <a class="dropdown-item" href="{{ url_for('predict.upgrade') }}">
                <i class="fa-solid fa-crown"></i> G√≥i: {{ current_plan|upper }}
              </a>
              <a
                class="dropdown-item"
                href="{{ url_for('predict.my_payments') }}"
              >
                <i class="fa-solid fa-receipt"></i> L·ªãch s·ª≠ thanh to√°n
              </a>
              <a
                class="dropdown-item"
                href="{{ url_for('settings.settings') }}"
              >
                <i class="fa-solid fa-gear"></i> C√†i ƒë·∫∑t
              </a>
              <div class="dropdown-divider"></div>
              <a
                class="dropdown-item dropdown-logout"
                href="{{ url_for('logout.logout') }}"
              >
                <i class="fa-solid fa-right-from-bracket"></i> ƒêƒÉng xu·∫•t
              </a>
            </div>
          </div>
        </div>
        {% endif %}
      </div>
    </nav>

    <div class="main-content">
      <main class="container">
        {% with messages = get_flashed_messages(with_categories=true) %} {% if
        messages %}
        <ul class="flashes">
          {% for category, message in messages %}
          <li class="flash {{ category }}">{{ message }}</li>
          {% endfor %}
        </ul>
        {% endif %} {% endwith %} {% block content %}{% endblock %}
      </main>

      <footer class="footer">
        <p>&copy; 2026 Nh·∫≠n di·ªán ch√≥/m√®o - Khu v·ª±c qu·∫£n tr·ªã</p>
      </footer>
    </div>

    {% block extra_js %}{% endblock %}
  </body>
</html>
