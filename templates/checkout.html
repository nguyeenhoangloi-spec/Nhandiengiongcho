{% extends 'base_dashboard.html' %} {% block title %}Thanh To√°n{% endblock %} {%
block extra_css %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/pages/monetization.css') }}"
/>
{% endblock %} {% block content %}
<div class="page-header monetization-header">
  <h1>üí≥ Thanh to√°n</h1>
  <p>Ho√†n t·∫•t thanh to√°n ƒë·ªÉ k√≠ch ho·∫°t g√≥i v√† ti·∫øp t·ª•c s·ª≠ d·ª•ng.</p>
</div>

<div class="monetization-card">
  <div class="checkout-summary">
    <div class="summary-item">
      <span>M√£ ƒë∆°n</span><strong>#{{ order_id }}</strong>
    </div>
    <div class="summary-item">
      <span>G√≥i</span><strong>{{ plan|upper }}</strong>
    </div>
    <div class="summary-item">
      <span>Ph∆∞∆°ng th·ª©c</span><strong>{{ payment_method|upper }}</strong>
    </div>
    <div class="summary-item">
      <span>S·ªë ti·ªÅn</span
      ><strong
        >{% if amount_vnd and amount_vnd > 0 %}{{
        "{:,}".format(amount_vnd).replace(",", ".") }}ƒë{% else %}Li√™n h·ªá{% endif
        %}</strong
      >
    </div>
  </div>

  <div class="payment-grid">
    <div class="payment-left">
      <h2 class="pay-title">Thanh to√°n b·∫±ng QR</h2>
      <p class="pay-sub">Qu√©t QR ƒë·ªÉ thanh to√°n nhanh (VietQR/EMVCo).</p>

      {% if qr_available %}
      <div class="qr-wrap">
        <img
          class="qr-img"
          src="{{ url_for('predict.payment_qr_png') }}"
          alt="QR Payment"
        />
      </div>
      {% else %}
      <div class="qr-missing">
        Thi·∫øu th∆∞ vi·ªán t·∫°o QR. C√†i th√™m <code>qrcode</code> ƒë·ªÉ hi·ªÉn th·ªã QR.
      </div>
      {% endif %}

      <div class="bank-box">
        <div class="bank-row">
          <span>Ng√¢n h√†ng</span
          ><strong>{{ config.get('VIETQR_BANK_NAME', 'Vietcombank') }}</strong>
        </div>
        <div class="bank-row">
          <span>S·ªë TK</span
          ><strong
            >{{ config.get('VIETQR_ACCOUNT_NUMBER', 'Ch∆∞a c·∫•u h√¨nh') }}</strong
          >
        </div>
        <div class="bank-row">
          <span>Ch·ªß TK</span
          ><strong
            >{{ config.get('VIETQR_ACCOUNT_NAME', 'DOG AI APP') }}</strong
          >
        </div>
        <div class="bank-row">
          <span>N·ªôi dung</span><strong>DOGAI {{ order_id }}</strong>
        </div>
      </div>
    </div>

    <div class="payment-right">
      <h2 class="pay-title">X√°c nh·∫≠n</h2>
      <p class="pay-sub">
        Sau khi thanh to√°n, b·∫•m x√°c nh·∫≠n ƒë·ªÉ k√≠ch ho·∫°t g√≥i (demo).
      </p>

      <form
        method="post"
        action="{{ url_for('predict.upgrade_buy') }}"
        class="confirm-form"
      >
        <input type="hidden" name="order_id" value="{{ order_id }}" />
        <div class="ad-actions">
          <a class="btn-outline" href="{{ url_for('predict.upgrade') }}"
            >‚Üê ƒê·ªïi g√≥i</a
          >
          <button class="btn-primary" type="submit">
            ‚úÖ T√¥i ƒë√£ thanh to√°n
          </button>
        </div>
      </form>

      <div class="ad-note">
        L∆∞u √Ω: QR l√† VietQR/EMVCo. Lu·ªìng x√°c nh·∫≠n v·∫´n l√† demo (ch∆∞a c√≥ callback
        t·ª± ƒë·ªông).
      </div>
    </div>
  </div>
</div>
{% endblock %}
