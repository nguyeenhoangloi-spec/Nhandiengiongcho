<!doctype html>
<html lang="vi" data-theme="{{ ui_theme }}">
  <head>
    <meta charset="UTF-8" />
    <meta name="color-scheme" content="light dark" />

    <script>
      // Apply theme sớm để tránh flash
      (function () {
        try {
          var t = localStorage.getItem("theme");
          if (t) document.documentElement.setAttribute("data-theme", t);
        } catch (e) {}
      })();
    </script>

    <title>{% block title %}Hệ thống nhận diện{% endblock %}</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/base.css') }}"
    />
    {% block extra_css %}{% endblock %}
  </head>
  <body>
    <header class="navbar">
      <div class="nav-left">
        <a class="brand" href="{{ url_for('home.index') }}"
          >Nhận diện chó/mèo</a
        >
      </div>
      <nav class="nav-right">
        <!-- Đã bỏ nút Trang chủ -->
        <a href="{{ url_for('dashboard.dashboard') }}">Dashboard</a>
        {% if session.get('user_id') %}
        <span class="hello">Xin chào, {{ session.get('username') }}</span>
        <a href="{{ url_for('logout.logout') }}">Đăng xuất</a>
        {% else %}
        <a href="{{ url_for('login.login') }}">Đăng nhập</a>
        <a href="{{ url_for('register.register') }}">Đăng ký</a>
        {% endif %}
      </nav>
    </header>

    <main class="container">
      {% with messages = get_flashed_messages(with_categories=true) %} {% if
      messages %}
      <ul class="flashes">
        {% for category, message in messages %}
        <li class="flash {{ category }}">{{ message }}</li>
        {% endfor %}
      </ul>
      {% endif %} {% endwith %} {% block content %}{% endblock %}
    </main>

    <footer class="footer">
      <p>&copy; 2026 Nhận diện chó/mèo</p>
    </footer>
  </body>
</html>
